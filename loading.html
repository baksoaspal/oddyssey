<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
  	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Tsuki's Odyssey</title>
	<link rel="icon" type="image/png" href="assets/decor/icon.png">
	<link href="https://fonts.googleapis.com/css2?family=Barlow:wght@800&display=swap" rel="stylesheet">
	<style>
		* { margin: 0; padding: 0; box-sizing: border-box; }

		html, body { height: 100%; width: 100%; }

		body {
			background: #F7EEC5;
			font-family: 'Barlow', sans-serif;
			overflow: hidden;
			display: flex;
			justify-content: center;
			align-items: center;
			transition: transform 1.2s ease-in-out, opacity 0.6s ease;
		}

		.container {
			position: relative;
			width: 100%;
			height: 100vh;
			background: #F7EEC5;
			overflow: hidden;
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.center {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: clamp(5px, 1.5vh, 15px);
			z-index: 2;
			transition: transform 1.2s ease-in-out, opacity 0.6s ease;
		}

		.carrot {
			width: clamp(90px, 20vw, 150px);
			animation: float 3s ease-in-out infinite;
		}

		@keyframes float {
			0%, 100% { transform: translateY(0); }
			50% { transform: translateY(-15px); }
		}

		.progress {
			color: #B58463;
			font-size: clamp(18px, 4vw, 35px);
			font-weight: 800;
			text-align: center;
			transform: translateY(-4px);
			transition: opacity 0.4s ease;
		}

		.bubble {
			position: absolute;
			bottom: -50px;
			background: #B58463;
			border-radius: 50%;
			opacity: 0.25;
			animation: rise linear infinite;
		}

		@keyframes rise {
			0% { transform: translateY(0) scale(1); opacity: 0.3; }
			100% { transform: translateY(-120vh) scale(1.6); opacity: 0; }
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="center" id="center">
			<img src="assets/decor/carrot.png" class="carrot" id="carrot">
			<div class="progress" id="progress-text">0%</div>
		</div>
	</div>

	<script>
		const lastLoadTime = localStorage.getItem("lastLoadTime");
		const cooldown = 1000 * 60 * 10; 

		if (!lastLoadTime || Date.now() - lastLoadTime > cooldown) {
			localStorage.setItem("redirecting", "true");

			const container = document.querySelector('.container');
			const center = document.getElementById('center');
			const progressText = document.getElementById('progress-text');
			let progress = 0;

			const loadingInterval = setInterval(() => {
				progress++;
				progressText.textContent = `${progress}%`;

				if (progress >= 100) {
					clearInterval(loadingInterval);
					setTimeout(() => {
						progressText.style.opacity = '0';
						center.style.transform = 'translateY(-150vh)';
						document.body.style.transform = 'translateY(-100vh)';

						setTimeout(() => {
							localStorage.setItem("lastLoadTime", Date.now());
							localStorage.removeItem("redirecting");
							window.location.href = "index.html";
						}, 1200);
					}, 500);
				}
			}, 60);

			function createBubble() {
				const bubble = document.createElement('div');
				const size = Math.random() * 20 + 10;
				bubble.classList.add('bubble');
				bubble.style.width = `${size}px`;
				bubble.style.height = `${size}px`;
				bubble.style.left = `${Math.random() * 100}%`;
				bubble.style.animationDuration = `${Math.random() * 6 + 9}s`;
				container.appendChild(bubble);
				setTimeout(() => bubble.remove(), 16000);
			}
			setInterval(createBubble, 900);

		} else {
			window.location.replace("index.html");
		}
</script>
</body>
</html>
